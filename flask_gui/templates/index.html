<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Fraud Detection</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <form action="{{ url_for('predict') }}" method="post">
            <div class="header-section">
                <div class="little-text">ECS 171 - MACHINE LEARNING</div>
                <div class="main-title">Bank Fraud Detection</div>
                <button type="button" class="random-button random-all-button" onclick="generateAllRandomValues()">
                    <img src="{{ url_for('static', filename='./icons/dice.svg') }}" class="button-icon">
                    Generate All Random Values
                </button>
            </div>

            <!-- Customer Information -->
            <section class="form-section">
                <div class="section-header">
                    Customer Information
                    <button type="button" class="random-button" onclick="generateRandomValues('customer-info')">
                        <img src="{{ url_for('static', filename='./icons/dice.svg') }}" class="button-icon">
                    </button>
                </div>
                <div class="form-grid" id="customer-info">
                    <div class="form-group">
                        <label for="customer_age">Customer Age</label>
                        <input type="number" id="customer_age" name="customer_age" required>
                    </div>
                    <div class="form-group">
                        <label for="income">Income</label>
                        <input type="number" id="income" name="income" min="0.1" max="0.9" step="0.1" required>
                    </div>
                    <div class="form-group">
                        <label for="employment_status">Employment Status</label>
                        <input type="text" id="employment_status" name="employment_status" required>
                    </div>
                    <div class="form-group">
                        <label for="credit_risk_score">Credit Risk Score</label>
                        <input type="number" id="credit_risk_score" name="credit_risk_score" required>
                    </div>
                    <div class="form-group">
                        <label for="housing_status">Housing Status</label>
                        <input type="text" id="housing_status" name="housing_status" required>
                    </div>
                    <div class="form-group">
                        <label for="payment_type">Payment Type</label>
                        <input type="text" id="payment_type" name="payment_type" required>
                    </div>
                </div>
            </section>

            <!-- Address & Contact Information -->
            <section class="form-section">
                <div class="section-header">
                    Address & Contact Information
                    <button type="button" class="random-button" onclick="generateRandomValues('address-info')">
                        <img src="{{ url_for('static', filename='./icons/dice.svg') }}" class="button-icon">
                    </button>
                </div>
                <div class="form-grid" id="address-info">
                    <div class="form-group">
                        <label for="current_address_months_count">Current Address Duration (Months)</label>
                        <input type="number" id="current_address_months_count" name="current_address_months_count" required>
                    </div>
                    <div class="form-group">
                        <label for="prev_address_months_count">Previous Address Duration (Months)</label>
                        <input type="number" id="prev_address_months_count" name="prev_address_months_count" required>
                    </div>
                    <div class="form-group">
                        <label for="phone_home_valid">Home Phone Valid</label>
                        <input type="number" id="phone_home_valid" name="phone_home_valid" min="0" max="1" required>
                    </div>
                    <div class="form-group">
                        <label for="phone_mobile_valid">Mobile Phone Valid</label>
                        <input type="number" id="phone_mobile_valid" name="phone_mobile_valid" min="0" max="1" required>
                    </div>
                </div>
            </section>

            <!-- Account Details -->
            <section class="form-section">
                <div class="section-header">
                    Account Details
                    <button type="button" class="random-button" onclick="generateRandomValues('account-details')">
                        <img src="{{ url_for('static', filename='./icons/dice.svg') }}" class="button-icon">
                    </button>
                </div>
                <div class="form-grid" id="account-details">
                    <div class="form-group">
                        <label for="intended_balcon_amount">Intended Balance Amount</label>
                        <input type="number" id="intended_balcon_amount" name="intended_balcon_amount" required>
                    </div>
                    <div class="form-group">
                        <label for="proposed_credit_limit">Proposed Credit Limit</label>
                        <input type="number" id="proposed_credit_limit" name="proposed_credit_limit" required>
                    </div>
                    <div class="form-group">
                        <label for="has_other_cards">Has Other Cards</label>
                        <input type="number" id="has_other_cards" name="has_other_cards" min="0" max="1" required>
                    </div>
                    <div class="form-group">
                        <label for="bank_months_count">Bank Account Duration (Months)</label>
                        <input type="number" id="bank_months_count" name="bank_months_count" required>
                    </div>
                    <div class="form-group">
                        <label for="bank_branch_count_8w">Bank Branch Count (8 Weeks)</label>
                        <input type="number" id="bank_branch_count_8w" name="bank_branch_count_8w" required>
                    </div>
                </div>
            </section>

            <!-- Transaction Patterns -->
            <section class="form-section">
                <div class="section-header">
                    Transaction Patterns
                    <button type="button" class="random-button" onclick="generateRandomValues('transaction-patterns')">
                        <img src="{{ url_for('static', filename='./icons/dice.svg') }}" class="button-icon">
                    </button>
                </div>
                <div class="form-grid" id="transaction-patterns">
                    <div class="form-group">
                        <label for="velocity_6h">Velocity (6 Hours)</label>
                        <input type="number" id="velocity_6h" name="velocity_6h" required>
                    </div>
                    <div class="form-group">
                        <label for="velocity_24h">Velocity (24 Hours)</label>
                        <input type="number" id="velocity_24h" name="velocity_24h" required>
                    </div>
                    <div class="form-group">
                        <label for="velocity_4w">Velocity (4 Weeks)</label>
                        <input type="number" id="velocity_4w" name="velocity_4w" required>
                    </div>
                    <div class="form-group">
                        <label for="zip_count_4w">ZIP Count (4 Weeks)</label>
                        <input type="number" id="zip_count_4w" name="zip_count_4w" required>
                    </div>
                </div>
            </section>

            <!-- Digital Footprint -->
            <section class="form-section">
                <div class="section-header">
                    Digital Footprint
                    <button type="button" class="random-button" onclick="generateRandomValues('digital-footprint')">
                        <img src="{{ url_for('static', filename='./icons/dice.svg') }}" class="button-icon">
                    </button>
                </div>
                <div class="form-grid" id="digital-footprint">
                    <div class="form-group">
                        <label for="email_is_free">Email is Free</label>
                        <input type="number" id="email_is_free" name="email_is_free" min="0" max="1" required>
                    </div>
                    <div class="form-group">
                        <label for="name_email_similarity">Name-Email Similarity</label>
                        <input type="number" id="name_email_similarity" name="name_email_similarity" min="0" max="1" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="device_os">Device OS</label>
                        <input type="text" id="device_os" name="device_os" required>
                    </div>
                    <div class="form-group">
                        <label for="device_fraud_count">Device Fraud Count</label>
                        <input type="number" id="device_fraud_count" name="device_fraud_count" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="device_distinct_emails_8w">Device Distinct Emails (8 Weeks)</label>
                        <input type="number" id="device_distinct_emails_8w" name="device_distinct_emails_8w" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="date_of_birth_distinct_emails_4w">DOB Distinct Emails (4 Weeks)</label>
                        <input type="number" id="date_of_birth_distinct_emails_4w" name="date_of_birth_distinct_emails_4w" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="session_length_in_minutes">Session Length (Minutes)</label>
                        <input type="number" id="session_length_in_minutes" name="session_length_in_minutes" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="keep_alive_session">Keep Alive Session</label>
                        <input type="number" id="keep_alive_session" name="keep_alive_session" min="0" max="1" required>
                    </div>
                </div>
            </section>

            <!-- Other Details -->
            <section class="form-section">
                <div class="section-header">
                    Other Details
                    <button type="button" class="random-button" onclick="generateRandomValues('other-details')">
                        <img src="{{ url_for('static', filename='./icons/dice.svg') }}" class="button-icon">
                    </button>
                </div>
                <div class="form-grid" id="other-details">
                    <div class="form-group">
                        <label for="fraud_bool">Fraud Bool</label>
                        <input type="number" id="fraud_bool" name="fraud_bool" min="0" max="1" required>
                    </div>
                    <div class="form-group">
                        <label for="foreign_request">Foreign Request</label>
                        <input type="number" id="foreign_request" name="foreign_request" min="0" max="1" required>
                    </div>
                    <div class="form-group">
                        <label for="month">Month</label>
                        <input type="number" id="month" name="month" min="0" max="8" required>
                    </div>
                    <div class="form-group">
                        <label for="source">Source</label>
                        <input type="text" id="source" name="source" required>
                    </div>
                    <div class="form-group">
                        <label for="days_since_request">Days Since Request</label>
                        <input type="number" id="days_since_request" name="days_since_request" required>
                    </div>
                </div>
            </section>

            <button type="submit">Predict Fraud Risk</button>
        </form>
    </div>

    <script>
        // Random value generation ranges for each field type
        const fieldRanges = {
            customer_age: { min: 18, max: 80 },
            income: { min: 0.1, max: 0.9},
            credit_risk_score: { min: 300, max: 850 },
            current_address_months_count: { min: 0, max: 240 },
            prev_address_months_count: { min: 0, max: 240 },
            phone_home_valid: { min: 0, max: 1 },
            phone_mobile_valid: { min: 0, max: 1 },
            intended_balcon_amount: { min: 1000, max: 50000 },
            proposed_credit_limit: { min: 1000, max: 50000 },
            has_other_cards: { min: 0, max: 1 },
            bank_months_count: { min: 0, max: 240 },
            velocity_6h: { min: 0, max: 100 },
            velocity_24h: { min: 0, max: 200 },
            velocity_4w: { min: 0, max: 500 },
            zip_count_4w: { min: 1, max: 10 },
            email_is_free: { min: 0, max: 1 },
            name_email_similarity: { min: 0, max: 1 },
            device_fraud_count: { min: 0, max: 10 },
            device_distinct_emails_8w: { min: 0, max: 50 },
            date_of_birth_distinct_emails_4w: { min: 0, max: 20 },
            bank_branch_count_8w: { min: 1, max: 20 },
            session_length_in_minutes: { min: 1, max: 120 },
            keep_alive_session: { min: 0, max: 1 },
            fraud_bool: { min: 0, max: 1 },
            foreign_request: { min: 0, max: 1 },
            month: { min: 0, max: 7},
            days_since_request: { min: 1, max: 10000 }
        };

        // Employment status options
        const employmentStatuses = ['Employed', 'Self-Employed', 'Unemployed', 'Retired', 'Student', 'Other', 'Unknown'];
        
        // Housing status options
        const housingStatuses = ['Own', 'Rent', 'Living with Parents', 'Other', 'Unknown', 'Temporary', 'Homeless'];

        // Payment type options
        const paymentTypes = ['AA', 'AB', 'AC', 'AD', 'AE'];
        
        // Device OS options
        const deviceOSs = ['Windows', 'macOS', 'Linux', 'X11', 'Other'];
        
        // Source options
        const sources = ['INTERNET', 'TELEAPP'];

        function getRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function getRandomFloat(min, max) {
            return (Math.random() * (max - min) + min).toFixed(2);
        }

        function getRandomEmploymentStatus() {
            const index = getRandomNumber(0, employmentStatuses.length - 1);
            return employmentStatuses[index];
        }

        function getRandomHousingStatus() {
            const index = getRandomNumber(0, housingStatuses.length - 1);
            return housingStatuses[index];
        }

        function getRandomPaymentType() {
            const index = getRandomNumber(0, paymentTypes.length - 1);
            return paymentTypes[index];
        }

        function getRandomSource() {
            const index = getRandomNumber(0, sources.length - 1);
            return sources[index];
        }

        function getRandomDeviceOS() {
            const index = getRandomNumber(0, deviceOSs.length - 1);
            return deviceOSs[index];
        }

        function generateRandomValues(sectionId) {
            const section = document.getElementById(sectionId);
            const inputs = section.querySelectorAll('input');
        
            // Generate random values for each input in the section
            inputs.forEach(input => {
                if (input.id === 'employment_status') {
                    input.value = getRandomEmploymentStatus();
                } else if (input.id === 'housing_status') {
                    input.value = getRandomHousingStatus();
                } else if (input.id === 'payment_type') {
                    input.value = getRandomPaymentType();
                } else if (input.id === 'device_os') {
                    input.value = getRandomDeviceOS();
                } else if (input.id === 'source') {
                    input.value = getRandomSource();
                } else if (input.id === 'name_email_similarity') {
                    input.value = getRandomFloat(0, 1);
                } else if (input.id in fieldRanges) {
                    const range = fieldRanges[input.id];
                    input.value = getRandomNumber(range.min, range.max);
                }
            });
        }

        function generateAllRandomValues() {
            // Customer Information
            document.getElementById('customer_age').value = getRandomNumber(10, 90);
            document.getElementById('income').value = (0.1 + 0.1 * Math.floor(Math.random() * 9)).toFixed(1);
            document.getElementById('employment_status').value = getRandomEmploymentStatus();
            document.getElementById('credit_risk_score').value = getRandomNumber(-191, 389);
            document.getElementById('housing_status').value = getRandomHousingStatus();
            document.getElementById('payment_type').value = getRandomPaymentType();

            // Address & Contact Information
            document.getElementById('current_address_months_count').value = getRandomNumber(-1, 429);
            document.getElementById('prev_address_months_count').value = getRandomNumber(-1, 380);
            document.getElementById('phone_home_valid').value = getRandomNumber(0, 1);
            document.getElementById('phone_mobile_valid').value = getRandomNumber(0, 1);

            // Account Details
            document.getElementById('intended_balcon_amount').value = getRandomNumber(-16, 114);
            document.getElementById('proposed_credit_limit').value = getRandomNumber(200, 2000);
            document.getElementById('has_other_cards').value = getRandomNumber(0, 1);
            document.getElementById('bank_months_count').value = getRandomNumber(-1, 32);
            document.getElementById('bank_branch_count_8w').value = getRandomNumber(0, 2404);

            // Transaction Patterns
            document.getElementById('velocity_6h').value = getRandomNumber(-175, 16818);
            document.getElementById('velocity_24h').value = getRandomNumber(1297, 9586);
            document.getElementById('velocity_4w').value = getRandomNumber(2825, 7020);
            document.getElementById('zip_count_4w').value = getRandomNumber(1, 6830);

            // Digital Footprint
            document.getElementById('email_is_free').value = getRandomNumber(0, 1);
            document.getElementById('name_email_similarity').value = getRandomFloat(0, 1);
            document.getElementById('device_os').value = getRandomDeviceOS();
            document.getElementById('device_fraud_count').value = getRandomNumber(0, 1);
            document.getElementById('device_distinct_emails_8w').value = getRandomNumber(0, 2);
            document.getElementById('date_of_birth_distinct_emails_4w').value = getRandomNumber(0, 39);
            document.getElementById('session_length_in_minutes').value = getRandomNumber(0, 107);
            document.getElementById('keep_alive_session').value = getRandomNumber(0, 1);

            // Other Details
            document.getElementById('fraud_bool').value = getRandomNumber(0, 1);
            document.getElementById('foreign_request').value = getRandomNumber(0, 1);
            document.getElementById('month').value = getRandomNumber(0, 7);
            document.getElementById('source').value = getRandomSource();
            document.getElementById('days_since_request').value = getRandomNumber(0, 79);
        }

        // Example usage
        console.log(getRandomEmploymentStatus());
        console.log(getRandomHousingStatus());
    </script>
</body>
</html>